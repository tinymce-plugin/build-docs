/*! 
*  @plugin @tinymce-plugin/tp-indent2em
*  @version 0.0.1 (2022-8-5)
*  @description 首行缩进
*  @copyright (2022) Five(Li Hailong) . All rights reserved. https://github.com/tinymce-plugin/tp-indent2em
*/(function(){"use strict";var s=function(n,e){return function(t){return n.selection.selectorChangedWithUnbind(e.join(","),function(r,o){t.setActive(parseInt(n.dom.getStyle(n.dom.getParent(o.node,"li,p,div"),"text-indent"))>0&&r)}).unbind}},a=function(n,e){n.undoManager.transact(function(){n.focus();for(var t=n.selection.getStart();t.nodeName!=="LI"&&t.nodeName!=="P"&&t.nodeName!=="DIV"&&t.nodeName!=="BODY";)t=t.parentNode;n.dom.getStyle(t,"text-indent")?n.execCommand("tpIndent",!1,"remove"):n.execCommand("tpIndent")})},u=function(n,e){n.ui.registry.getAll().icons[e.registryName]||n.ui.registry.addIcon(e.registryName,e.icon),n.ui.registry.addToggleButton(e.registryName,{icon:e.registryName,tooltip:e.title,onAction:function(){return a(n)},onSetup:s(n,['*[style*="text-indent"]','*[data-mce-style*="text-indent"]'])}),n.ui.registry.addMenuItem(e.registryName,{icon:e.registryName,text:e.title,onAction:function(){return a(n)}})},c=function(n,e){n.addCommand("mce".concat(e.registryName.substring(0,1).toUpperCase()+e.registryName.substring(1)),function(){a(n)})},g=function(n,e){tinymce.util.XHR.send({url:n.tp$.isDev()?"/langs/i18n.json":n.editorManager.PluginManager.urls[e.registryName]+"/langs/i18n.json",async:!1,success:function(t){try{n.tp$.I18n.add(n.settings.language,JSON.parse(t)[n.settings.language])}catch{}}})},m=function(n){tinymce.PluginManager.add(n.registryName,function(e,t){return g(e,n),u(e,n),c(e,n),{getMetadata:function(){return{name:n.name,url:n.repo}}}})},i={name:"Indent2em",registryName:"tpIndent2em",title:"First line indent",repo:"https://github.com/tinymce-plugin/tp-indent2em",icon:'<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M170.666667 563.2v-102.4H887.466667v102.4zM170.666667 836.266667v-102.4H887.466667v102.4zM512 290.133333v-102.4H887.466667v102.4zM238.933333 341.333333V136.533333l204.8 102.4z"  p-id="5210"></path></svg>'};m(i);var l={opt:i};return l})();
